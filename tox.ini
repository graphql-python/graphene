[tox]
envlist = py{27,36,37,38,39},flake8,pre-commit,mypy

[gh-actions]
python =
    2.7: py27
    3.6: py36
    3.7: py37
    3.8: py38
    3.9: py39

[testenv]
passenv = *
usedevelop = True
deps =
    -e.[test]
    py{36,37,38,39}: pytest-asyncio
setenv =
     PYTHONPATH = .:{envdir}
commands =
    py{27}: py.test --cov=graphene graphene examples {posargs}
    py{36,37,38,39}: py.test --cov=graphene graphene examples tests_asyncio tests_py36 {posargs}

[testenv:pre-commit]
deps =
    pre-commit>0.12.0
setenv =
    LC_CTYPE=en_US.UTF-8
commands =
    pre-commit {posargs:run --all-files}

[testenv:mypy]
basepython=python3.7
deps =
    mypy
commands =
    mypy graphene

[testenv:flake8]
deps = flake8
commands =
    pip install -e .
    flake8 graphene
