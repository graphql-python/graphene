[tox]
envlist = py3{8,9,10,11,12-dev},flake8,pre-commit,mypy

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310
    3.11: py311
    3.12-dev: py312

[testenv]
passenv = *
usedevelop = True
deps =
    -e.[test]
    py3{8,9,10,11,12-dev}: pytest-asyncio
setenv =
     PYTHONPATH = .:{envdir}
commands =
    py{27}: py.test --cov=graphene graphene examples {posargs}
    py3{8,9,10,11,12-dev}: py.test --cov=graphene graphene examples tests_asyncio tests_py36 {posargs}

[testenv:pre-commit]
basepython = python3.11
deps =
    pre-commit>=3,<4
setenv =
    LC_CTYPE=en_US.UTF-8
commands =
    pre-commit run --all-files --show-diff-on-failure

[testenv:mypy]
deps =
    mypy
commands =
    mypy graphene

[testenv:flake8]
deps = flake8
commands =
    pip install -e .
    flake8 graphene
